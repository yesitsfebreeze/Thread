{{ define "title" }}Thread Â· Edit Document{{ end }}
{{ template "base" . }}
{{ define "actions" }}
<a href="/vault/{{ .doc.VaultID }}" class="rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-sm hover:bg-slate-50">Back</a>
{{ end }}
{{ define "content" }}
<h1 class="text-2xl font-semibold mb-4">Edit: {{ .doc.Title }}</h1>
<form hx-post="/vault/{{ .doc.VaultID }}/doc/{{ .doc.ID }}/edit" hx-redirect="/vault/{{ .doc.VaultID }}" class="space-y-4 max-w-2xl">
  <div>
    <label class="block text-sm text-slate-600">Title</label>
    <input name="__title" value="{{ .doc.Title }}" class="mt-1 w-full rounded-lg border-slate-300 focus:border-brand-500 focus:ring-brand-500" />
  </div>

  {{ range $i, $f := .sd.Fields }}
    {{ $val := index $.data $f.Name }}
    <div>
      <label class="block text-sm text-slate-700">{{ $f.Label }}</label>
      {{ if eq $f.Type "text" }}
        <textarea name="{{ $f.Name }}" rows="4" class="mt-1 w-full rounded-lg border-slate-300 focus:border-brand-500 focus:ring-brand-500">{{ $val }}</textarea>
      {{ else if eq $f.Type "boolean" }}
        <label class="inline-flex items-center gap-2 mt-1">
          <input type="checkbox" name="{{ $f.Name }}" {{ if $val }}checked{{ end }} class="rounded border-slate-300 text-brand-600 focus:ring-brand-500" />
          <span class="text-sm text-slate-600">True</span>
        </label>
      {{ else if eq $f.Type "number" }}
        <input type="number" step="any" name="{{ $f.Name }}" value="{{ $val }}" class="mt-1 w-full rounded-lg border-slate-300 focus:border-brand-500 focus:ring-brand-500" />
      {{ else if eq $f.Type "select" }}
        <select name="{{ $f.Name }}" class="mt-1 w-full rounded-lg border-slate-300 focus:border-brand-500 focus:ring-brand-500">
          <option value=""></option>
          {{ range $f.Enum }}
            <option value="{{ . }}" {{ if eq . (printf "%v" $val) }}selected{{ end }}>{{ . }}</option>
          {{ end }}
        </select>
      {{ else }}
        <input name="{{ $f.Name }}" value="{{ $val }}" class="mt-1 w-full rounded-lg border-slate-300 focus:border-brand-500 focus:ring-brand-500" />
      {{ end }}
      {{ if $f.Required }}<p class="mt-1 text-xs text-rose-600">Required</p>{{ end }}
    </div>
  {{ end }}

  <div class="pt-2">
    <button class="inline-flex items-center rounded-lg bg-brand-600 px-3 py-2 text-white hover:bg-brand-700">Save Changes</button>
  </div>
</form>
{{ end }}
